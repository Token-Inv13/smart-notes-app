(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[311],{79:(e,t,l)=>{"use strict";l.d(t,{P:()=>d});var s=l(6127),n=l(6435),r=l(2069),i=l(8106),a=l(3392);function d(e){let{user:t}=(0,i.A)(),l=(0,s.useMemo)(()=>{if(!t)return null;let l=(0,n.rJ)(r.db,"tasks"),s=[(0,n._M)("userId","==",t.uid)];return(null==e?void 0:e.workspaceId)&&s.push((0,n._M)("workspaceId","==",e.workspaceId)),s.push((0,n.My)("dueDate","asc")),(null==e?void 0:e.limit)&&e.limit>0&&s.push((0,n.AB)(e.limit)),(0,n.P)(l,...s)},[t,null==e?void 0:e.workspaceId,null==e?void 0:e.limit]);return t?(0,a.G)(l):{data:[],loading:!1,error:null,refetch:()=>{}}}},2069:(e,t,l)=>{"use strict";let s,n,r,i;l.d(t,{db:()=>r,gw:()=>m,hg:()=>d.hg,j2:()=>n});var a=l(1869),d=l(3086),u=l(6435),o=l(6512),c=l(3668),h=l(5732),p=l(4536);let _={apiKey:p.env.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:p.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:p.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,appId:p.env.NEXT_PUBLIC_FIREBASE_APP_ID,messagingSenderId:p.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,measurementId:p.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID};if(!_.apiKey||!_.projectId||!_.appId)throw Error("Missing required Firebase environment variables");let E="true"===p.env.NEXT_PUBLIC_USE_EMULATORS,I=null;async function m(){return I||null}s=(0,a.Dk)().length?(0,a.Dk)()[0]:(0,a.Wp)(_),n=(0,d.xI)(s),r=(0,u.aU)(s),i=(0,o.c7)(s),E&&((0,d.Wq)(n,"http://localhost:9099",{disableWarnings:!0}),(0,u.vN)(r,"localhost",8080),(0,o.nb)(i,"localhost",9199)),I=(0,c.TT)().then(e=>e?(0,c.dG)(s):null),(0,h.TT)().then(e=>e?(0,h.P5)(s):null)},2363:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>o});var s=l(4215),n=l(6127),r=l(6435),i=l(2069),a=l(8106),d=l(3392),u=l(79);function o(){let{data:e,loading:t,error:l}=function(e){let{user:t}=(0,a.A)(),l=(0,n.useMemo)(()=>{if(!t)return null;let l=(0,r.rJ)(i.db,"notes"),s=[(0,r._M)("userId","==",t.uid)];return(null==e?void 0:e.workspaceId)&&s.push((0,r._M)("workspaceId","==",e.workspaceId)),s.push((0,r.My)("updatedAt","desc")),(null==e?void 0:e.limit)&&e.limit>0&&s.push((0,r.AB)(e.limit)),(0,r.P)(l,...s)},[null==t?void 0:t.uid,null==e?void 0:e.workspaceId,null==e?void 0:e.limit]);return t?(0,d.G)(l):{data:[],loading:!1,error:null,refetch:()=>{}}}({limit:5}),{data:o,loading:c,error:h}=(0,u.P)({limit:5});return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("section",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Recent notes"}),t&&(0,s.jsx)("p",{children:"Loading notes..."}),l&&(0,s.jsx)("p",{children:"Error loading notes."}),!t&&!l&&0===e.length&&(0,s.jsx)("p",{children:"No notes yet."}),(0,s.jsx)("ul",{className:"space-y-1",children:e.map(e=>(0,s.jsx)("li",{children:e.title},e.id))})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Upcoming tasks"}),c&&(0,s.jsx)("p",{children:"Loading tasks..."}),h&&(0,s.jsx)("p",{children:"Error loading tasks."}),!c&&!h&&0===o.length&&(0,s.jsx)("p",{children:"No tasks yet."}),(0,s.jsx)("ul",{className:"space-y-1",children:o.map(e=>(0,s.jsx)("li",{children:e.title},e.id))})]})]})}},3392:(e,t,l)=>{"use strict";l.d(t,{G:()=>r});var s=l(6127),n=l(6435);function r(e){let[t,l]=(0,s.useState)([]),[r,i]=(0,s.useState)(!!e),[a,d]=(0,s.useState)(null),[u,o]=(0,s.useState)(0);return(0,s.useEffect)(()=>{if(!e){l([]),i(!1),d(null);return}i(!0);let t=(0,n.aQ)(e,e=>{l(e.docs.map(e=>({id:e.id,...e.data()}))),i(!1)},e=>{d(e),i(!1)});return()=>t()},[e,u]),{data:t,loading:r,error:a,refetch:()=>o(e=>e+1)}}},6541:(e,t,l)=>{Promise.resolve().then(l.bind(l,2363))},8106:(e,t,l)=>{"use strict";l.d(t,{A:()=>r});var s=l(6127),n=l(2069);function r(){let[e,t]=(0,s.useState)(null),[l,r]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{let e=(0,n.hg)(n.j2,e=>{t(e),r(!1)});return()=>e()},[]),{user:e,loading:l}}}},e=>{e.O(0,[680,661,694,533,125,358],()=>e(e.s=6541)),_N_E=e.O()}]);